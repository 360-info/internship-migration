sep = "<br>")) +
save_360plot(mmp1, "out/figures/migrantsheatmap.png",
shape = "sdtv-landscape")
mmp1 +
labs(title = toupper("Dead and Missing Migrants"),
subtitle = toupper(paste(
"Number of dead and missing migrants from reported",
"incidents 2014-2022",
sep = "\n")),
caption = paste(
"**CHART:** Ruimin Lin, James Goldie, 360info",
"**DATA:** Missing Migrants Project",
sep = "<br>"))
hm1 <- missingMG1 %>%
ggplot(aes(x = `Incident year`,
y = `Region of Incident`,
fill = `Total Number of Dead and Missing`)) +
geom_tile(colour = "black") +
geom_text(aes(label = `Total Number of Dead and Missing`),
size = 3) +
scale_fill_gradient(low = "white", high = "red") +
theme_360() +
guides(fill="none")
mp1 <- missingMG1a %>%
ggplot(aes(x = `Region of Incident`,
y = pct,
alpha = pct)) +
geom_col(width = .7,
fill = "red") +
geom_text(aes(label = Label), hjust = -0.2, size = 3) +
scale_y_continuous(expand = expansion(mult = c(.0, .25))) +
theme_void() +
scale_alpha_continuous(range = c(0.5, 1)) +
guides(alpha="none") +
coord_flip()
mmp1 <-
hm1 + mp1 + plot_layout(ncol = 2, widths = c(2, 1.1))
mmp1 <- mmp1 +
labs(title = toupper("Dead and Missing Migrants"),
subtitle = toupper(paste(
"Number of dead and missing migrants from reported",
"incidents 2014-2022",
sep = "\n")),
caption = paste(
"**CHART:** Ruimin Lin, James Goldie, 360info",
"**DATA:** Missing Migrants Project",
sep = "<br>"))
save_360plot(mmp1, "out/figures/migrantsheatmap.png",
shape = "sdtv-landscape")
hm1 <- missingMG1 %>%
ggplot(aes(x = `Incident year`,
y = `Region of Incident`,
fill = `Total Number of Dead and Missing`)) +
geom_tile(colour = "black") +
geom_text(aes(label = `Total Number of Dead and Missing`),
size = 3) +
scale_fill_gradient(low = "white", high = "red") +
theme_360() +
guides(fill="none") +
labs(title = toupper("Dead and Missing Migrants"),
subtitle = toupper(paste(
"Number of dead and missing migrants from reported",
"incidents 2014-2022",
sep = "\n")),
caption = paste(
"**CHART:** Ruimin Lin, James Goldie, 360info",
"**DATA:** Missing Migrants Project",
sep = "<br>"))
mp1 <- missingMG1a %>%
ggplot(aes(x = `Region of Incident`,
y = pct,
alpha = pct)) +
geom_col(width = .7,
fill = "red") +
geom_text(aes(label = Label), hjust = -0.2, size = 3) +
scale_y_continuous(expand = expansion(mult = c(.0, .25))) +
theme_void() +
scale_alpha_continuous(range = c(0.5, 1)) +
guides(alpha="none") +
coord_flip()
mmp1 <-
hm1 + mp1 + plot_layout(ncol = 2, widths = c(2, 1.1))
save_360plot(mmp1, "out/figures/migrantsheatmap.png",
shape = "sdtv-landscape")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(themes360info)
library(leaflet)
library(patchwork)
missingMG <- read_csv("data/Missing_Migrants_Global_Figures_allData.csv")
missingMG
missingMG <- missingMG %>%
mutate_at(vars(8:14),
funs(ifelse(is.na(.),0,.)))
missingMG
# Converting NA values to 0, from columns `Number of Dead` to `Number of Children`.
missingMG$Coordinates <-
str_extract_all(missingMG$Coordinates, "(?<=\\().+?(?=\\))") %>%
str_split(" ", 2)
missingMG <- missingMG %>%
drop_na(Coordinates) %>%
mutate(Coordinates = sapply(Coordinates, toString)) %>%
separate(Coordinates,
c("lon", "lat"),
",")
missingMG <- missingMG %>%
drop_na(lon, lat) %>%
mutate(lon = as.double(lon),
lat = as.double(lat),
`Incident year` = as.character(`Incident year`))
missingMGrecent <-
missingMG %>%
filter(`Incident year` == 2020)
leaflet(missingMGrecent) %>%
addProviderTiles("Esri") %>%
addMarkers(lng = ~lon,
lat = ~lat)
#shapefile from http://thematicmapping.org/downloads/world_borders.php
missingMG1 <- missingMG %>%
select(`Incident year`,
`Region of Incident`,
`Total Number of Dead and Missing`)
missingMG1 <- missingMG1 %>%
group_by(`Incident year`, `Region of Incident`) %>%
summarise(`Total Number of Dead and Missing` = sum(`Total Number of Dead and Missing`)) %>%
ungroup()
missingMG1 <- missingMG1 %>%
complete(`Incident year`,
`Region of Incident`)
missingMG1[is.na(missingMG1)] <- 0
missingMG1a <- missingMG1 %>%
group_by(`Region of Incident`) %>%
summarise(`Region total` = sum(`Total Number of Dead and Missing`)) %>%
mutate(pct = round((`Region total`/sum(`Region total`)),4),
Label = paste0(round(pct*100,1), "%"))
hm1 <- missingMG1 %>%
ggplot(aes(x = `Incident year`,
y = `Region of Incident`,
fill = `Total Number of Dead and Missing`)) +
geom_tile(colour = "black") +
geom_text(aes(label = `Total Number of Dead and Missing`),
size = 3) +
scale_fill_gradient(low = "white", high = "red") +
theme_360() +
guides(fill="none") +
labs(title = toupper("Dead and Missing Migrants"),
subtitle = toupper(paste(
"Number of dead and missing migrants from reported",
"incidents 2014-2022",
sep = "\n")),
caption = paste(
"**CHART:** Ruimin Lin, James Goldie, 360info",
"**DATA:** Missing Migrants Project",
sep = "<br>"))
mp1 <- missingMG1a %>%
ggplot(aes(x = `Region of Incident`,
y = pct,
alpha = pct)) +
geom_col(width = .7,
fill = "red") +
geom_text(aes(label = Label), hjust = -0.2, size = 3) +
scale_y_continuous(expand = expansion(mult = c(.0, .25))) +
theme_void() +
scale_alpha_continuous(range = c(0.5, 1)) +
guides(alpha="none") +
coord_flip()
mmp1 <- hm1 + mp1 + plot_layout(ncol = 2, widths = c(2, 1.1))
save_360plot(mmp1, "out/figures/migrantsheatmap.png",
shape = "sdtv-landscape")
missingMG %>%
ggplot(aes(x = `Reported Month`,
y = `Total Number of Dead and Missing`)) +
geom_col(aes(fill = `Region of Incident`))
hm1 <- missingMG1 %>%
ggplot(aes(x = `Incident year`,
y = `Region of Incident`,
fill = `Total Number of Dead and Missing`)) +
geom_tile(colour = "black") +
geom_text(aes(label = `Total Number of Dead and Missing`),
size = 3) +
scale_fill_gradient(low = "white", high = "red") +
theme_360() +
guides(fill="none") +
labs(title = toupper("Dead and Missing Migrants"),
subtitle = toupper(paste(
"Number of dead and missing migrants from reported",
"incidents 2014-2022",
sep = "\n")))
mp1 <- missingMG1a %>%
ggplot(aes(x = `Region of Incident`,
y = pct,
alpha = pct)) +
geom_col(width = .7,
fill = "red") +
geom_text(aes(label = Label), hjust = -0.2, size = 3) +
scale_y_continuous(expand = expansion(mult = c(.0, .25))) +
theme_void() +
scale_alpha_continuous(range = c(0.5, 1)) +
guides(alpha="none") +
coord_flip()
mmp1 <- hm1 + mp1 + plot_layout(ncol = 2, widths = c(2, 1.1))
save_360plot(mmp1, "out/figures/migrantsheatmap.png",
shape = "sdtv-landscape")
hm1 <- missingMG1 %>%
ggplot(aes(x = `Incident year`,
y = `Region of Incident`,
fill = `Total Number of Dead and Missing`)) +
geom_tile(colour = "black") +
geom_text(aes(label = `Total Number of Dead and Missing`),
size = 3) +
scale_fill_gradient(low = "white", high = "red") +
theme_360() +
guides(fill="none") +
labs(title = toupper("Dead and Missing Migrants"),
subtitle = toupper(paste(
"Number of dead and missing migrants from reported",
"incidents 2014-2022",
sep = "\n")))
mp1 <- missingMG1a %>%
ggplot(aes(x = `Region of Incident`,
y = pct,
alpha = pct)) +
geom_col(width = .7,
fill = "red") +
geom_text(aes(label = Label), hjust = -0.2, size = 3) +
scale_y_continuous(expand = expansion(mult = c(.0, .25))) +
theme_void() +
scale_alpha_continuous(range = c(0.5, 1)) +
guides(alpha="none") +
coord_flip()
mmp1 <- hm1 + mp1 + plot_layout(ncol = 2, widths = c(2, 1.1))
mmp1 +
labs(caption = paste(
"**CHART:** Ruimin Lin, James Goldie, 360info",
"**DATA:** Missing Migrants Project",
sep = "<br>"))
save_360plot(mmp1, "out/figures/migrantsheatmap.png",
shape = "sdtv-landscape")
hm1 <- missingMG1 %>%
ggplot(aes(x = `Incident year`,
y = `Region of Incident`,
fill = `Total Number of Dead and Missing`)) +
geom_tile(colour = "black") +
geom_text(aes(label = `Total Number of Dead and Missing`),
size = 3) +
scale_fill_gradient(low = "white", high = "red") +
theme_360() +
guides(fill="none") +
labs(title = toupper("Dead and Missing Migrants"),
subtitle = toupper(paste(
"Number of dead and missing migrants from reported",
"incidents 2014-2022",
sep = "\n")))
mp1 <- missingMG1a %>%
ggplot(aes(x = `Region of Incident`,
y = pct,
alpha = pct)) +
geom_col(width = .7,
fill = "red") +
geom_text(aes(label = Label), hjust = -0.2, size = 3) +
scale_y_continuous(expand = expansion(mult = c(.0, .25))) +
theme_void() +
scale_alpha_continuous(range = c(0.5, 1)) +
guides(alpha="none") +
coord_flip()
mmp1 <- hm1 + mp1 + plot_layout(ncol = 2, widths = c(2, 1.1))
mmp1 <- mmp1 +
labs(caption = paste(
"**CHART:** Ruimin Lin, James Goldie, 360info",
"**DATA:** Missing Migrants Project",
sep = "<br>"))
save_360plot(mmp1, "out/figures/migrantsheatmap.png",
shape = "sdtv-landscape")
?plot_annotation
hm1 <- missingMG1 %>%
ggplot(aes(x = `Incident year`,
y = `Region of Incident`,
fill = `Total Number of Dead and Missing`)) +
geom_tile(colour = "black") +
geom_text(aes(label = `Total Number of Dead and Missing`),
size = 3) +
scale_fill_gradient(low = "white", high = "red") +
theme_360() +
guides(fill="none") +
labs(title = toupper("Dead and Missing Migrants"),
subtitle = toupper(paste(
"Number of dead and missing migrants from reported",
"incidents 2014-2022",
sep = "\n")))
mp1 <- missingMG1a %>%
ggplot(aes(x = `Region of Incident`,
y = pct,
alpha = pct)) +
geom_col(width = .7,
fill = "red") +
geom_text(aes(label = Label), hjust = -0.2, size = 3) +
scale_y_continuous(expand = expansion(mult = c(.0, .25))) +
theme_void() +
scale_alpha_continuous(range = c(0.5, 1)) +
guides(alpha="none") +
coord_flip()
mmp1 <- hm1 + mp1 + plot_layout(ncol = 2, widths = c(2, 1.1))
mmp1 <- mmp1 +
plot_annotation(caption = paste(
"**CHART:** Ruimin Lin, James Goldie, 360info",
"**DATA:** Missing Migrants Project",
sep = "<br>"))
save_360plot(mmp1, "out/figures/migrantsheatmap.png",
shape = "sdtv-landscape")
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(themes360info)
library(leaflet)
library(patchwork)
missingMG <- read_csv("data/Missing_Migrants_Global_Figures_allData.csv")
missingMG
missingMG <- missingMG %>%
mutate_at(vars(8:14),
funs(ifelse(is.na(.),0,.)))
missingMG
# Converting NA values to 0, from columns `Number of Dead` to `Number of Children`.
missingMG$Coordinates <-
str_extract_all(missingMG$Coordinates, "(?<=\\().+?(?=\\))") %>%
str_split(" ", 2)
missingMG <- missingMG %>%
drop_na(Coordinates) %>%
mutate(Coordinates = sapply(Coordinates, toString)) %>%
separate(Coordinates,
c("lon", "lat"),
",")
missingMG <- missingMG %>%
drop_na(lon, lat) %>%
mutate(lon = as.double(lon),
lat = as.double(lat),
`Incident year` = as.character(`Incident year`))
missingMGrecent <-
missingMG %>%
filter(`Incident year` == 2020)
leaflet(missingMGrecent) %>%
addProviderTiles("Esri") %>%
addMarkers(lng = ~lon,
lat = ~lat)
#shapefile from http://thematicmapping.org/downloads/world_borders.php
missingMG1 <- missingMG %>%
select(`Incident year`,
`Region of Incident`,
`Total Number of Dead and Missing`)
missingMG1 <- missingMG1 %>%
group_by(`Incident year`, `Region of Incident`) %>%
summarise(`Total Number of Dead and Missing` = sum(`Total Number of Dead and Missing`)) %>%
ungroup()
missingMG1 <- missingMG1 %>%
complete(`Incident year`,
`Region of Incident`)
missingMG1[is.na(missingMG1)] <- 0
missingMG1a <- missingMG1 %>%
group_by(`Region of Incident`) %>%
summarise(`Region total` = sum(`Total Number of Dead and Missing`)) %>%
mutate(pct = round((`Region total`/sum(`Region total`)),4),
Label = paste0(round(pct*100,1), "%"))
hm1 <- missingMG1 %>%
ggplot(aes(x = `Incident year`,
y = `Region of Incident`,
fill = `Total Number of Dead and Missing`)) +
geom_tile(colour = "black") +
geom_text(aes(label = `Total Number of Dead and Missing`),
size = 3) +
scale_fill_gradient(low = "white", high = "red") +
theme_360() +
guides(fill="none") +
labs(title = toupper("Dead and Missing Migrants"),
subtitle = toupper(paste(
"Number of dead and missing migrants from reported",
"incidents 2014-2022",
sep = "\n")))
mp1 <- missingMG1a %>%
ggplot(aes(x = `Region of Incident`,
y = pct,
alpha = pct)) +
geom_col(width = .7,
fill = "red") +
geom_text(aes(label = Label), hjust = -0.2, size = 3) +
scale_y_continuous(expand = expansion(mult = c(.0, .25))) +
theme_void() +
scale_alpha_continuous(range = c(0.5, 1)) +
guides(alpha="none") +
coord_flip()
mmp1 <- hm1 + mp1 + plot_layout(ncol = 2, widths = c(2, 1.1))
mmp1 <- mmp1 +
plot_annotation(caption = paste(
"**CHART:** Ruimin Lin, James Goldie, 360info",
"**DATA:** Missing Migrants Project",
sep = "<br>"))
save_360plot(mmp1, "out/figures/migrantsheatmap.png",
shape = "sdtv-landscape")
missingMG %>%
ggplot(aes(x = `Reported Month`,
y = `Total Number of Dead and Missing`)) +
geom_col(aes(fill = `Region of Incident`))
mmp1
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(themes360info)
library(leaflet)
library(patchwork)
missingMG <- read_csv("data/Missing_Migrants_Global_Figures_allData.csv")
missingMG
missingMG <- missingMG %>%
mutate_at(vars(8:14),
funs(ifelse(is.na(.),0,.)))
missingMG
# Converting NA values to 0, from columns `Number of Dead` to `Number of Children`.
missingMG$Coordinates <-
str_extract_all(missingMG$Coordinates, "(?<=\\().+?(?=\\))") %>%
str_split(" ", 2)
missingMG <- missingMG %>%
drop_na(Coordinates) %>%
mutate(Coordinates = sapply(Coordinates, toString)) %>%
separate(Coordinates,
c("lon", "lat"),
",")
missingMG <- missingMG %>%
drop_na(lon, lat) %>%
mutate(lon = as.double(lon),
lat = as.double(lat),
`Incident year` = as.character(`Incident year`))
missingMGrecent <-
missingMG %>%
filter(`Incident year` == 2020)
leaflet(missingMGrecent) %>%
addProviderTiles("Esri") %>%
addMarkers(lng = ~lon,
lat = ~lat)
#shapefile from http://thematicmapping.org/downloads/world_borders.php
missingMG1 <- missingMG %>%
select(`Incident year`,
`Region of Incident`,
`Total Number of Dead and Missing`)
missingMG1 <- missingMG1 %>%
group_by(`Incident year`, `Region of Incident`) %>%
summarise(`Total Number of Dead and Missing` = sum(`Total Number of Dead and Missing`)) %>%
ungroup()
missingMG1 <- missingMG1 %>%
complete(`Incident year`,
`Region of Incident`)
missingMG1[is.na(missingMG1)] <- 0
missingMG1a <- missingMG1 %>%
group_by(`Region of Incident`) %>%
summarise(`Region total` = sum(`Total Number of Dead and Missing`)) %>%
mutate(pct = round((`Region total`/sum(`Region total`)),4),
Label = paste0(round(pct*100,1), "%"))
hm1 <- missingMG1 %>%
ggplot(aes(x = `Incident year`,
y = `Region of Incident`,
fill = `Total Number of Dead and Missing`)) +
geom_tile(colour = "black") +
geom_text(aes(label = `Total Number of Dead and Missing`),
size = 3) +
scale_fill_gradient(low = "white", high = "red") +
theme_360() +
guides(fill="none") +
labs(title = toupper("Dead and Missing Migrants"),
subtitle = toupper(paste(
"Number of dead and missing migrants from reported",
"incidents 2014-2022",
sep = "\n")))
mp1 <- missingMG1a %>%
ggplot(aes(x = `Region of Incident`,
y = pct,
alpha = pct)) +
geom_col(width = .7,
fill = "red") +
geom_text(aes(label = Label), hjust = -0.2, size = 3) +
scale_y_continuous(expand = expansion(mult = c(.0, .25))) +
theme_void() +
scale_alpha_continuous(range = c(0.5, 1)) +
guides(alpha="none") +
coord_flip()
mmp1 <- hm1 + mp1 + plot_layout(ncol = 2, widths = c(2, 1.1))
mmp1 <- mmp1 +
plot_annotation(caption = paste(
"**CHART:** Ruimin Lin, James Goldie, 360info",
"**DATA:** Missing Migrants Project",
sep = "<br>"))
save_360plot(mmp1, "out/figures/migrantsheatmap.png",
shape = "sdtv-landscape")
missingMG %>%
ggplot(aes(x = `Reported Month`,
y = `Total Number of Dead and Missing`)) +
geom_col(aes(fill = `Region of Incident`))
View(missingMG1)
View(missingMG1a)
missingMG
missingMG %>%
ggplot(aes(x = `Cause of Death`)) %>%
geom_bar()
missingMG %>%
ggplot(aes(x = `Cause of Death`)) +
geom_bar()
missingMG %>%
ggplot(aes(x = `Cause of Death`,
y = `Incident year`)) +
geom_line()
View(missingMG)
missingMG %>%
ggplot(aes(x = `Cause of Death`,
y = `Total Number of Dead and Missing`)) +
geom_line()
missingMG %>%
ggplot(aes(x = `Cause of Death`)) +
geom_bar() +
facet_wrap(~`Region of Incident`)
