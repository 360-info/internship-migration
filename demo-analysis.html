<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.421">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="James Goldie, 360info">
<meta name="dcterms.date" content="2022-03-11">

<title>Demo 360 Quarto analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="demo-analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="demo-analysis_files/libs/quarto-html/quarto.js"></script>
<script src="demo-analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="demo-analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="demo-analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="demo-analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link id="quarto-text-highlighting-styles" href="demo-analysis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<script src="demo-analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="demo-analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="demo-analysis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<script type="module" src="demo-analysis_files/libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="demo-analysis_files/libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">
<script type="ojs-define">
{"contents":[{"name":"pollution","value":{"country":["Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Australia","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Austria","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Belgium","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Canada","Chile","Chile","Chile","Chile","Chile","Chile","Chile","Chile","Chile","Chile","Chile","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Czech Republic","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Denmark","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Estonia","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Europe","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","Finland","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","France","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Germany","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Greece","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Hungary","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Iceland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Ireland","Israel","Israel","Israel","Israel","Israel","Israel","Israel","Israel","Israel","Israel","Israel","Israel","Israel","Israel","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Italy","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Japan","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Latvia","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Luxembourg","Mexico","Mexico","Mexico","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","Netherlands","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","New Zealand","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","Norway","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","OECD - Total","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Poland","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Portugal","Russia","Russia","Russia","Russia","Russia","Russia","Russia","Russia","Russia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovakia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","Slovenia","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","South Korea","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Spain","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Sweden","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Switzerland","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","Turkey","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United Kingdom","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States","United States"],"year":[1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1996,2000,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1999,2005,2008,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2006,2007,2008,2009,2010,2011,2012,2013,2014,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"co_tpyr":[5729,5747,5897,6122,6263,6108,6282,6298,5948,5759,5430,5182,4884,4426,4498,3949,3781,3327,3211,3149,2980,2929,2902,2806,2721,2673,1286,1286,1216,1150,1085,987,992,923,885,783,784,762,729,734,715,686,665,626,602,568,581,563,563,584,536,565,1412,1371,1343,1257,1143,1128,1104,1004,962,885,943,896,884,855,816,770,717,673,671,444,519,413,366,547,345,396,12164,11865,11771,12031,11765,11429,11171,10948,11067,10862,10624,9812,9686,9389,8817,7870,7386,7091,6919,6546,6431,6048,5849,5729,5709,5595,4387,4515,4496,4633,4678,4874,4919,4847,4740,3423,2048,1028,1122,1126,1153,1033,892,913,925,758,680,706,731,701,701,701,643,639,645,586,544,574,522,521,528,482,503,741,768,749,735,694,661,640,594,556,508,488,481,462,469,458,463,453,459,439,410,407,370,354,342,315,326,215,215,121,122,158,212,236,248,196,204,195,197,186,177,169,153,139,155,155,154,155,130,140,134,128,128,62721,60716,57782,55731,51750,49881,48597,45965,43185,40825,38193,36301,34370,33392,32235,30490,29443,28650,28226,25916,26870,24600,23940,23012,21579,21787,709,681,667,649,631,616,609,603,589,575,548,548,534,514,496,469,459,442,420,399,411,375,372,358,351,335,10421,10749,10186,9712,9009,8974,8443,7917,7616,7161,6531,6177,5960,5686,5774,5273,4750,4548,4339,3893,4295,3614,3219,3332,3067,2989,12498,10270,8886,8088,6732,6436,5984,5848,5405,5061,4790,4614,4340,4159,3923,3718,3621,3503,3398,2952,3317,3230,2855,2828,2715,2678,1134,1120,1076,1071,1049,956,951,949,950,956,925,915,858,814,810,725,742,684,626,594,557,524,580,466,456,436,1217,1092,876,868,775,762,760,741,691,679,649,657,638,666,594,447,466,427,388,392,383,366,350,326,289,458,59,59,60,60,61,53,53,47,53,49,49,51,54,55,55,50,59,75,113,118,117,115,116,119,117,120,348,341,327,310,294,290,286,266,271,255,245,241,230,221,217,215,198,186,175,156,143,131,125,118,111,108,478,376,284,264,257,238,226,214,200,187,169,143,139,136,7258,7600,7720,7809,7383,7302,7002,6556,6088,5638,4930,4471,3900,3951,3409,3445,3299,3364,3485,3114,3080,2423,2669,2490,2258,2356,4507,4446,4288,4196,4210,4163,4091,4070,3915,3884,3918,3716,3594,3499,3393,3052,3033,3069,2925,2839,3453,2826,2878,2787,2669,2503,386,354,329,334,320,292,295,269,253,245,232,239,229,230,220,202,203,185,171,182,147,152,156,142,136,131,463,450,413,425,362,210,193,132,56,55,42,43,40,40,42,38,35,39,33,30,29,27,27,27,25,22,7494,41975,33036,1134,1035,994,968,917,908,891,839,808,779,743,741,734,726,736,716,726,714,718,670,668,646,613,583,556,563,598,590,596,600,629,635,634,656,662,675,677,682,702,719,737,729,730,744,724,709,723,712,705,700,699,710,826,775,740,750,746,725,706,697,671,646,627,609,602,577,548,551,525,510,497,449,461,436,429,399,379,385,217763,211060,203773,197147,188488,182017,175461,169684,164195,156853,152200,145414,134190,130118,126145,120298,116145,112157,104112,95102,97262,93388,90061,86366,82253,80163,3876,3794,3712,3630,3548,3466,3525,3334,3003,3056,2647,2713,2791,2758,2836,2754,2905,2831,2834,2788,3019,2933,2791,2876,2704,2401,801,815,853,832,812,800,787,752,728,702,651,570,552,512,480,440,409,385,360,340,323,303,288,281,274,268,17438,17485,16299,15632,15363,15840,16119,15782,15517,505,483,441,452,427,416,359,359,342,330,300,305,290,292,292,272,273,249,245,208,221,227,221,218,225,231,324,313,282,293,286,285,296,267,227,204,189,183,176,172,159,154,144,136,131,134,135,132,129,127,108,110,885,901,845,823,805,817,789,830,802,696,810,760,710,697,690,4781,4581,4679,4593,4362,4041,4039,3808,3743,3587,2935,2522,2361,2263,2188,2107,1977,1964,1845,1687,1759,1717,1662,1626,1643,1642,1104,1151,1099,1005,1026,971,946,868,824,766,706,677,642,635,596,586,559,557,544,532,523,511,487,482,467,462,797,763,710,625,574,532,514,484,464,451,425,404,377,365,347,330,306,287,276,259,248,227,219,212,194,185,2023,2061,2092,2054,1926,2009,2083,2194,2069,1922,2876,2454,2455,2499,2501,2367,2395,2435,2743,2850,2833,2726,2918,2102,1991,2349,7376,7465,7085,6787,6401,5957,5991,5340,4977,4648,4038,4099,3643,3322,3153,2916,2778,2569,2431,2050,1964,1788,1768,1767,1705,1641,129789,125656,121529,116866,112404,108392,103277,100331,98155,93561,92083,88531,79817,77603,75384,73162,70704,68247,61195,54933,55857,55394,52948,50502,48056,46088],"co_index":[100,100.33,102.93,106.87,109.33,106.62,109.66,109.93,103.83,100.53,94.78,90.46,85.25,77.26,78.52,68.94,66.01,58.08,56.06,54.97,52.02,51.13,50.65,48.98,47.5,46.66,100,99.96,94.53,89.41,84.32,76.72,77.15,71.75,68.77,60.85,60.97,59.22,56.68,57.04,55.55,53.34,51.69,48.69,46.84,44.18,45.17,43.75,43.78,45.37,41.69,43.92,100,97.12,95.15,89.02,80.95,79.91,78.18,71.14,68.13,62.71,66.76,63.47,62.62,60.55,57.79,54.5,50.8,47.67,47.55,31.47,36.78,29.28,25.91,38.73,24.45,28.04,100,97.54,96.77,98.91,96.72,93.95,91.84,90.01,90.98,89.29,87.34,80.67,79.63,77.19,72.48,64.7,60.72,58.29,56.88,53.81,52.87,49.72,48.09,47.1,46.93,46,null,null,null,null,null,null,null,null,null,null,null,100,109.23,109.6,112.19,100.5,86.77,88.87,90.06,73.74,66.16,68.74,71.17,68.22,68.22,68.24,62.56,62.22,62.81,57.07,52.96,55.88,50.77,50.71,51.4,46.87,48.98,100,103.62,101.13,99.18,93.7,89.22,86.44,80.19,75.09,68.65,65.91,64.93,62.38,63.26,61.9,62.47,61.1,62.03,59.27,55.39,54.96,49.99,47.81,46.14,42.58,44.06,100,100.07,56.15,56.67,73.34,98.8,109.7,115.51,91.05,94.85,90.66,91.7,86.75,82.14,78.83,71.34,64.51,71.92,72.06,71.58,71.97,60.57,65.28,62.12,59.61,59.54,100,96.8,92.13,88.86,82.51,79.53,77.48,73.29,68.85,65.09,60.89,57.88,54.8,53.24,51.39,48.61,46.94,45.68,45,41.32,42.84,39.22,38.17,36.69,34.41,34.74,100,96.04,94.15,91.64,89.02,87,85.95,85.16,83.06,81.09,77.32,77.31,75.35,72.51,69.94,66.22,64.75,62.36,59.29,56.35,58.01,52.92,52.48,50.51,49.49,47.35,100,103.14,97.74,93.19,86.45,86.11,81.02,75.97,73.09,68.72,62.67,59.27,57.19,54.57,55.41,50.6,45.58,43.64,41.64,37.36,41.21,34.68,30.89,31.97,29.43,28.68,100,82.18,71.1,64.72,53.86,51.5,47.88,46.79,43.25,40.5,38.33,36.92,34.73,33.28,31.39,29.75,28.97,28.03,27.19,23.62,26.54,25.84,22.85,22.63,21.72,21.43,100,98.77,94.85,94.43,92.51,84.28,83.82,83.62,83.73,84.29,81.51,80.66,75.68,71.73,71.45,63.92,65.44,60.34,55.17,52.4,49.14,46.2,51.16,41.1,40.24,38.48,100,89.72,71.94,71.33,63.62,62.56,62.46,60.86,56.76,55.78,53.31,53.97,52.37,54.7,48.76,36.69,38.31,35.08,31.87,32.21,31.49,30.05,28.73,26.74,23.78,37.59,100,100.24,102.29,101.66,102.92,89.28,90.32,79.68,90.27,83.04,83.6,86.72,91.12,92.51,93.85,85.33,100.35,127.64,192.15,199.21,197.96,194.55,197,201.22,197.95,202.55,100,97.9,93.8,88.95,84.38,83.1,82.13,76.46,77.68,73.09,70.2,69.18,66.06,63.55,62.31,61.71,56.95,53.25,50.31,44.64,40.98,37.7,35.95,33.85,31.79,30.92,null,null,null,null,null,null,null,null,null,null,null,null,null,null,100,104.71,106.36,107.6,101.72,100.61,96.47,90.33,83.88,77.68,67.93,61.59,53.74,54.44,46.96,47.46,45.46,46.35,48.01,42.9,42.43,33.38,36.77,34.3,31.12,32.47,100,98.66,95.15,93.11,93.42,92.39,90.78,90.31,86.88,86.18,86.95,82.45,79.75,77.65,75.29,67.72,67.31,68.11,64.91,63,76.63,62.7,63.85,61.84,59.22,55.54,100,91.8,85.16,86.45,82.83,75.64,76.47,69.77,65.57,63.43,60.06,61.9,59.21,59.56,57.12,52.43,52.54,47.93,44.36,47.11,37.95,39.28,40.49,36.7,35.34,33.89,100,97.28,89.16,91.9,78.18,45.27,41.66,28.45,12.1,11.86,9,9.36,8.74,8.55,9.06,8.15,7.64,8.43,7.22,6.44,6.22,5.73,5.86,5.74,5.41,4.68,null,null,null,100,91.28,87.71,85.43,80.86,80.11,78.57,74.05,71.24,68.71,65.53,65.38,64.74,64.07,64.89,63.14,64.06,63,63.37,59.09,58.96,56.99,54.06,51.44,49.01,49.66,100,98.67,99.61,100.39,105.23,106.13,106.03,109.66,110.75,112.9,113.12,114.04,117.44,120.18,123.23,121.94,122,124.31,121.07,118.54,120.9,119.03,117.84,117.06,116.92,118.71,100,93.89,89.6,90.79,90.35,87.85,85.43,84.36,81.3,78.21,75.89,73.78,72.84,69.87,66.38,66.71,63.56,61.78,60.2,54.33,55.85,52.79,51.95,48.33,45.91,46.61,100,96.92,93.58,90.53,86.56,83.59,80.57,77.92,75.4,72.03,69.89,66.78,61.62,59.75,57.93,55.24,53.34,51.5,47.81,43.67,44.66,42.89,41.36,39.66,37.77,36.81,100,97.89,95.77,93.66,91.54,89.42,90.95,86.02,77.48,78.85,68.29,70.01,72.02,71.17,73.16,71.07,74.95,73.04,73.11,71.93,77.9,75.67,72.02,74.22,69.76,61.96,100,101.78,106.58,103.92,101.35,99.94,98.22,93.86,90.93,87.66,81.29,71.21,68.95,63.96,59.93,55.01,51.11,48.11,44.97,42.52,40.31,37.9,35.92,35.14,34.22,33.53,null,null,null,null,null,null,null,null,null,100,95.64,87.33,89.51,84.55,82.38,71.09,71.09,67.72,65.35,59.42,60.32,57.44,57.82,57.88,53.87,53.96,49.32,48.51,41.16,43.74,44.98,43.81,43.25,44.58,45.66,100,96.77,86.96,90.33,88.21,87.96,91.39,82.5,70.23,63.01,58.49,56.41,54.43,53.16,48.97,47.52,44.41,42.02,40.47,41.46,41.74,40.87,39.74,39.27,33.41,34.07,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,100,95.82,97.87,96.06,91.24,84.53,84.48,79.65,78.29,75.02,61.39,52.75,49.38,47.34,45.76,44.07,41.36,41.09,38.59,35.28,36.78,35.9,34.75,34.01,34.37,34.34,100,104.28,99.5,90.99,92.93,87.97,85.73,78.66,74.63,69.39,63.98,61.34,58.15,57.47,53.96,53.08,50.62,50.46,49.25,48.21,47.41,46.28,44.13,43.69,42.31,41.83,100,95.68,89.1,78.39,72,66.79,64.43,60.77,58.26,56.62,53.31,50.7,47.26,45.81,43.5,41.42,38.36,35.95,34.57,32.49,31.13,28.45,27.53,26.57,24.33,23.15,100,101.86,103.4,101.52,95.18,99.29,102.97,108.43,102.26,95.01,142.15,121.3,121.35,123.54,123.62,116.97,118.38,120.36,135.6,140.85,140.05,134.72,144.21,103.88,98.43,116.08,100,101.22,96.06,92.02,86.79,80.77,81.22,72.41,67.48,63.01,54.75,55.57,49.4,45.04,42.75,39.54,37.66,34.83,32.95,27.8,26.63,24.25,23.98,23.96,23.12,22.25,100,96.82,93.64,90.04,86.61,83.51,79.57,77.3,75.63,72.09,70.95,68.21,61.5,59.79,58.08,56.37,54.48,52.58,47.15,42.33,43.04,42.68,40.8,38.91,37.03,35.51]}}]}
</script>
<script type="ojs-define">
{"contents":[{"name":"country_list","value":["Australia","Austria","Belgium","Canada","Chile","Czech Republic","Denmark","Estonia","Europe","Finland","France","Germany","Greece","Hungary","Iceland","Ireland","Israel","Italy","Japan","Latvia","Luxembourg","Mexico","Netherlands","New Zealand","Norway","OECD - Total","Poland","Portugal","Russia","Slovakia","Slovenia","South Korea","Spain","Sweden","Switzerland","Turkey","United Kingdom","United States"]}]}
</script>


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Demo 360 Quarto analysis</h1>
<p class="subtitle lead">With another comment on the thing here</p>
</div>





<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>James Goldie, 360info </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">March 11, 2022</p>
    </div>
  </div>
    
  </div>
  

</header>

<p>This demo analyses some data on emissions of various pollutants from Our World in Data in R, then creates a chart in Observable JS. The <a href="">pollution-embed.qmd</a> file is anb embeddable version of that chart.</p>
<section id="the-analysis" class="level2">
<h2 class="anchored" data-anchor-id="the-analysis">The analysis</h2>
<p>This analysis is <em>really quick</em>: we download the OWID data, selecting a few columns and giving them tidier names, and we pass it immediately onto Observable JS.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>pollution <span class="ot">&lt;-</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_csv</span>(</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"https://github.com/owid/owid-datasets/raw/"</span>,</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"dd7a4ecbb249f98028e25c304ef7d68de8979ea9/datasets/"</span>,</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Air%20Pollutant%20Emissions%20-%20OECD/"</span>,</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Air%20Pollutant%20Emissions%20-%20OECD.csv"</span>),</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_select =</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>      <span class="fu">c</span>(Entity, Year, <span class="st">`</span><span class="at">Carbon Monoxide</span><span class="st">`</span>, <span class="st">`</span><span class="at">Carbon Monoxide (Index)</span><span class="st">`</span>))      </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 910 Columns: 4
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): Entity
dbl (3): Year, Carbon Monoxide, Carbon Monoxide (Index)

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(pollution) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"country"</span>, <span class="st">"year"</span>, <span class="st">"co_tpyr"</span>, <span class="st">"co_index"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>pollution</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 910 × 4
   country    year co_tpyr co_index
   &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;    &lt;dbl&gt;
 1 Australia  1990    5729     100 
 2 Australia  1991    5747     100.
 3 Australia  1992    5897     103.
 4 Australia  1993    6122     107.
 5 Australia  1994    6263     109.
 6 Australia  1995    6108     107.
 7 Australia  1996    6282     110.
 8 Australia  1997    6298     110.
 9 Australia  1998    5948     104.
10 Australia  1999    5759     101.
# … with 900 more rows</code></pre>
</div>
</div>
<p>Here’s what the data looks like. To pass it on to Observable JS, we call <code>ojs_define</code>. We also pass a list of the countries in the data on separately so that we can use it for a dropdown menu.</p>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ojs_define</span>(<span class="at">pollution =</span> pollution)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ojs_define</span>(<span class="at">country_list =</span> <span class="fu">unique</span>(pollution<span class="sc">$</span>country))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The names that we use in <code>ojs_define</code> are now available below.</p>
</section>
<section id="the-visualisation" class="level2">
<h2 class="anchored" data-anchor-id="the-visualisation">The visualisation</h2>
<p>Now, let’s chart the data using <a href="https://observablehq.com/@observablehq/plot">Observable Plot</a>! And to make things a little trickier, let’s throw a dropdown menu for the country in, courtesy of <a href="https://observablehq.com/@observablehq/inputs">Observable Inputs</a>.</p>
<div id="pollutionplot" class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb6" data-startfrom="53" data-source-offset="-60"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 52;"><span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a>viewof countrySelect <span class="op">=</span> Inputs<span class="op">.</span><span class="fu">select</span>(country_list<span class="op">,</span> {<span class="dt">label</span><span class="op">:</span> <span class="st">"Pick a country:"</span>})<span class="op">;</span></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a><span class="co">// transpose() changes our data from column-major (in R/Python) to row-major for</span></span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a><span class="co">// Observable Plot. Then the filter function filters it based on the country</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="co">// input above (hence it's reactive!)</span></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>filteredPollution <span class="op">=</span> <span class="fu">transpose</span>(pollution)<span class="op">.</span><span class="fu">filter</span>(<span class="kw">function</span>(row) {</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> row<span class="op">.</span><span class="at">country</span> <span class="op">==</span> countrySelect<span class="op">;</span></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a><span class="co">// finally, here's out chart</span></span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a>pollutionChart <span class="op">=</span> Plot<span class="op">.</span><span class="fu">plot</span>({</span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>  <span class="dt">marks</span><span class="op">:</span> [</span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">// horizontal line at y = 0</span></span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">ruleY</span>([<span class="dv">0</span>])<span class="op">,</span></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">// bars of tonnes emitted per year, with a tooltip</span></span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a>    Plot<span class="op">.</span><span class="fu">barY</span>(filteredPollution<span class="op">,</span> {</span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>      <span class="dt">x</span><span class="op">:</span> <span class="st">"year"</span><span class="op">,</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a>      <span class="dt">y</span><span class="op">:</span> <span class="st">"co_tpyr"</span><span class="op">,</span></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>      <span class="dt">title</span><span class="op">:</span> (d) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>d<span class="op">.</span><span class="at">country</span><span class="sc">}</span><span class="vs"> in </span><span class="sc">${</span>d<span class="op">.</span><span class="at">year</span><span class="sc">}</span><span class="vs">: </span><span class="sc">${</span>d<span class="op">.</span><span class="at">co_tpyr</span><span class="sc">}</span><span class="vs"> tonnes`</span></span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>  <span class="dt">width</span><span class="op">:</span> <span class="dv">1024</span></span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="pollutionplot-1">
<div id="ojs-cell-1-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="pollutionplot-2">
<div id="ojs-cell-1-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="pollutionplot-3">
<div id="ojs-cell-1-3" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>Nice! Now check out <a href="demo-embed.html"><code>demo-embed.qmd</code></a> for the embeddable version!</p>
<p>The above example shows that we can have ‘reactive’ plots at the language level: I can connect a dropdown or other input to the plot and have it respond very easily.</p>
<p>Newer versions of Observable Plot support tooltips and hover styling, although it seems that the version embedded with Quarto doesn’t. Other kinds of interactivity don’t seem to work.</p>
<p>That said, we can write any kind of JavaScript in an OJS cell, or even import and reuse a chart from a notebook published on &lt;observablehq.com&gt;, provided it’s marked with an open source licence. We can even combine this approach with Observable Inputs.</p>
<p>For example, <a href="https://observablehq.com/@d3/bar-chart-transitions">here’s one from d3</a>, who are also the makers of Observable Plot:</p>
<div id="d3barchart" class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7" data-startfrom="91" data-source-offset="-1"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 90;"><span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {BarChart} <span class="im">from</span> <span class="st">"@d3/bar-chart-transitions"</span></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>d3barchart <span class="op">=</span> <span class="fu">BarChart</span>(filteredPollution<span class="op">,</span> {</span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a>  <span class="dt">x</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">year</span><span class="op">,</span></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>  <span class="dt">y</span><span class="op">:</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">co_tpyr</span><span class="op">,</span></span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a>  <span class="dt">yFormat</span><span class="op">:</span> <span class="st">""</span><span class="op">,</span></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a>  <span class="dt">yLabel</span><span class="op">:</span> <span class="st">"↑ Carbon Monoxide"</span><span class="op">,</span></span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a>  width<span class="op">,</span></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a>  <span class="dt">height</span><span class="op">:</span> <span class="dv">350</span><span class="op">,</span></span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a>  <span class="dt">color</span><span class="op">:</span> <span class="st">"#333"</span></span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a>})<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display">
<div id="d3barchart-1">
<div id="ojs-cell-2-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell-output cell-output-display">
<div id="d3barchart-2">
<div id="ojs-cell-2-2" data-nodetype="declaration">

</div>
</div>
</div>
</div>
<p>Note that the dropdown menu from the previous chart controls this one too! So we can use Observable Inputs with custom charts (although note there’s no transition - that would be hadled using the chart’s <code>update</code> method).</p>
</section>

</main>
<!-- /main column -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"\n// here's our dropdown menu, using the country list from R\nviewof countrySelect = Inputs.select(country_list, {label: \"Pick a country:\"});\n\n// transpose() changes our data from column-major (in R/Python) to row-major for\n// Observable Plot. Then the filter function filters it based on the country\n// input above (hence it's reactive!)\nfilteredPollution = transpose(pollution).filter(function(row) {\n  return row.country == countrySelect;\n})\n\n// finally, here's out chart\npollutionChart = Plot.plot({\n  marks: [\n    // horizontal line at y = 0\n    Plot.ruleY([0]),\n    // bars of tonnes emitted per year, with a tooltip\n    Plot.barY(filteredPollution, {\n      x: \"year\",\n      y: \"co_tpyr\",\n      title: (d) => `${d.country} in ${d.year}: ${d.co_tpyr} tonnes`\n    })\n  ],\n  width: 1024\n});\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"\nimport {BarChart} from \"@d3/bar-chart-transitions\"\n\nd3barchart = BarChart(filteredPollution, {\n  x: d => d.year,\n  y: d => d.co_tpyr,\n  yFormat: \"\",\n  yLabel: \"↑ Carbon Monoxide\",\n  width,\n  height: 350,\n  color: \"#333\"\n});\n"},{"methodName":"interpretQuiet","source":"shinyInput('countrySelect')"}]}
</script>
<script type="module">
window._ojs.paths.runtimeToDoc = "..\..\..";
window._ojs.paths.runtimeToRoot = "..\..\..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>